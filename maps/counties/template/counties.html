<!DOCTYPE html>
<html>
<head>
    <title>Simple Leaflet Map</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="leaflet.map.css" />
    <script src="http://dev.bowdenweb.com/a/js/jquery-1.7.2.min.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
  </head>
  <body>
    <div class="content">
      <p>Within your geojson file (countries.js) you want to set the entire geojson as a variable so it is accessible from within your script.</p>
<code>var countries = {"type":"FeatureCollection", ... // rest of geojson</code>
    <p><cite><a href="http://giscollective.org/tutorials/web-mapping/leaflet-2/">Leaflet: GeoJSON Data &#124; GISC, http://giscollective.org/tutorials/web-mapping/leaflet-2/</a></cite></p>
    <div id="map" style="width:100%; height:800px"></div>

<script src="va-counties-2000.geojson"></script>
<script>
window.onload = function () {
 	var map = L.map('map').setView([37.750, -79.0000], 7);
 	
	L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
		attribution: '&copy; <a href="/web/20140329142757/http://osm.org/copyright">OpenStreetMap</a> contributors'
	}).addTo(map);

	var countyStyle = {
		'color': "#000",
		'weight': 2,
		'opacity': 0.6
	};
		var info = L.control({prefix: 'Leaflet'});
info.onAdd = function (map) {
	this._div = L.DomUtil.create('div', 'info');
	this.update();
	return this._div;
};
info.update = function (props) {
	this._div.innerHTML = '<h4 class="infotitle">Virginia Population Density</h4> \
	<ul class="infolist">' +  (props ? 
	'<li><b>Population Density Rank</b>' + props.popdensityrank + '</li> \
	<li><b>Population</b>' + props.population + '</li> \
	<li><b>Locality</b>' + props.name + '</li> \
	<li><b>Population Density</b>' + props.density + ' people / mi<sup>2</sup></li> \
	</ul>' 
	: '<li>Hover over a locality</li></ul>');
};
// info.addTo(map);
function popup(feature, layer) {
	// layer.bindPopup(feature.properties.name);
	layer.bindPopup(info);
}	
	
	
	
	
	
//	function popup(feature, layer) {
//		if (feature.properties && feature.properties.name) {
//			layer.bindPopup(feature.properties.name);
//		}
//	}
	
	L.geoJson(virginiaLocalities, {
		onEachFeature: popup,
		style: countyStyle
	}).addTo(map);
	
	
	
	
	
};


	// this._div.innerHTML = '<h4 class="infotitle">Virginia Population Density</h4><ul class="infolist">' +  (props ?
	// '<li><b>Population Density Rank</b>' + props.popdensityrank + '</li><li><b>Population</b>' + props.population + '</li><li><b>Locality</b>' + props.name + '</li><li><b>Population Density</b>' + props.density + ' people / mi<sup>2</sup></li></ul>'

// var virginiaLocalities = {"type":"FeatureCollection","features":[
// {"type":"Feature","id":0,"properties":{
// "area":0.112242,
// "Perimeter":2.213981,
// "CO51_D00_":2.000000,
// "co51-d00-i":1.000000,
// "State":"51",
// "County":"069",
// "name":"Frederick",
// "lsad":"06",
// "lsad-trans":"County",
// "popdensityrank":"50",
// "density":188.5,
</script>

</div>

  </body>
</html>