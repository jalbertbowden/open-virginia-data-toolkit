<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>Simple Leaflet Map</title>
    <link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="leaflet.map.css" />
    <script src="http://dev.bowdenweb.com/a/js/jquery-1.7.2.min.js"></script>
    <!-- <script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>  -->
    <script src="../leaflet2.js"></script>
<style>
div.leaflet-top.leaflet-right{width:100%; height:100%; outline:20px dotted #000;}

div.info.leaflet-control{width:100%; height:100%}

div#leafletjs-map-legend-box{background-color:#000; color:#fff; width:100%; height:1000px; border:8px double #333}

div#leafletjs-map-legend{
	background-color:#000; 
	color:#fff; width:300px; 
	height:450px; 
	border:8px double #c0c0c0; 
	padding:1px;
	position:absolute;
	right:0;
	top:20%;
}


div#map-content-box{width:100%; height:10%;
	background:#000;
	opacity:.6;
	z-index:999999;
	position:absolute;
	top:0;
	left:0;}
h4.infotitle{
background-color:#c0c0c0; color:#000; font-size:45px}
ul.infolist{
background:#ff0; color:#ff0; outline:10px dotted #999;
}
ul.infolist li{}
ul.infolist b{display:block}
</style>
  </head>
  <body>
    <div class="content">
      <p>Within your geojson file (countries.js) you want to set the entire geojson as a variable so it is accessible from within your script.</p>
<code>var countries = {"type":"FeatureCollection", ... // rest of geojson</code>
    <p><cite><a href="http://giscollective.org/tutorials/web-mapping/leaflet-2/">Leaflet: GeoJSON Data &#124; GISC, http://giscollective.org/tutorials/web-mapping/leaflet-2/</a></cite></p>
    <div id="map" style="width:100%; height:800px"></div>
<script src="va-counties-2000.geojson"></script>
<script src="member-senate-of-virginia-017.json"></script>
<script>
window.onload = function () {
 	var map = L.map('map').setView([37.750, -79.0000], 7);
 	
	L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
		attribution: '&copy; <a href="/web/20140329142757/http://osm.org/copyright">OpenStreetMap</a> contributors'
	}).addTo(map);

	var countyStyle = {
		'color': "#000",
		'weight': 2,
		'opacity': 0.6
	};
function onEachFeature(feature, layer) {
	layer.on({
		mouseover: highlightFeature,
		mouseout: resetHighlight,
		click: zoomToFeature
	});
}
	
	
	
var info = L.control({prefix: 'Leaflet'});
info.onAdd = function (map) {
	this._div = L.DomUtil.create('div', 'info');
	this.update();
	return this._div;
};
info.update = function (props) {
	this._div.innerHTML = '<div id=\"map-content-box\"></div> \
	<div id="leafletjs-map-legend"> \
	<h1>' + election201511General.ElectionName + '</h1> \
	<ul class=\"xoxo json-list\"> \
	<li><b>ElectionDate</b>: <time>' + election201511General.ElectionName + '</time></li> \
	<li><b>CreateDate</b>: ' + election201511General.CreateDate + '</li> \
	<li><b>RaceName</b>: ' + election201511General.RaceName + '</li> \
	<li><b>NumberOfSeats</b>: ' + election201511General.NumberOfSeats + '</li> \
	<li><b>Localities</b>:   + Locality.LocalityName + </li></ul> \
	<h4 class="infotitle">Virginia Population Density</h4> \
	<ul class="infolist">' +  (props ? // shows on hover
	'<li><b>Population Density Rank</b>' + props.popdensityrank + '</li> \
	<li><b>Population</b>' + props.population + '</li> \
	<li><b>Locality</b>' + props.name + '</li> \
	<li><b>Population Density</b>' + props.density + ' people / mi<sup>2</sup></li> \
	<li><b>area</b>' + props.area + '</li> \
	<li><b>Perimeter</b>' + props.Perimeter + '</li> \
	<li><b>State</b>' + props.State + '</li> \
	<li><b>County</b>' + props.County + '</li> \
	<li><b>name</b>' + props.name + '</li> \
	<li><b>lsad</b>' + props.lsad + '</li> \
	<li><b>popdensityrank</b>' + props.popdensityrank + '</li> \
	<li><b>density</b>' + props.density + '</li> \
	<li><b>population</b>' + props.population + '</li> \
	</ul></div>'
	: '<li>Hover over a locality</li></ul>');
};
console.log("election201511General.Localities");
info.addTo(map);
function style(feature) {
	return {
		weight: 2,
		opacity: 1,
		color: '#fff',
		dashArray: '3',
		fillOpacity: 0.7,
		fillColor: getColor(feature.properties.density)
	};
}
function highlightFeature(e) {
	var layer = e.target;
	layer.setStyle({
		weight: 5,
		color: '#fff',
		dashArray: '',
		fillOpacity: 0.7
	});
	if (!L.Browser.ie && !L.Browser.opera) {
		layer.bringToFront();
	}
	info.update(layer.feature.properties);
}
var geojson;
function resetHighlight(e) {
	geojson.resetStyle(e.target);
	info.update();
}
function zoomToFeature(e) {
	map.fitBounds(e.target.getBounds());
}
// virginiaJSON = virginiaLocalities + election201511General;
geojson = L.geoJson(virginiaLocalities, {
		onEachFeature: onEachFeature,
		style: countyStyle
	}).addTo(map);
	
	
// geojson = L.geoJson(virginiaLocalities, {
// 	style: style,
// 	onEachFeature: onEachFeature
// }).addTo(map);	
	
	
};


	// this._div.innerHTML = '<h4 class="infotitle">Virginia Population Density</h4><ul class="infolist">' +  (props ?
	// '<li><b>Population Density Rank</b>' + props.popdensityrank + '</li><li><b>Population</b>' + props.population + '</li><li><b>Locality</b>' + props.name + '</li><li><b>Population Density</b>' + props.density + ' people / mi<sup>2</sup></li></ul>'

// var virginiaLocalities = {"type":"FeatureCollection","features":[
// {"type":"Feature","id":0,"properties":{
// "area":0.112242,
// "Perimeter":2.213981,
// "CO51_D00_":2.000000,
// "co51-d00-i":1.000000,
// "State":"51",
// "County":"069",
// "name":"Frederick",
// "lsad":"06",
// "lsad-trans":"County",
// "popdensityrank":"50",
// "density":188.5,
</script>

</div>

  </body>
</html>